{% extends "base.html" %} {% block title %}Admin Dashboard{% endblock %} {%
block content %}

<div class="container py-5">
	<h1 class="mb-4">All Patients</h1>
	<div class="card shadow-sm">
		<div class="card-body">
			<form method="GET" class="d-flex align-items-center mt-4 mb-3 px-3">
				<div class="input-group">
					<span class="input-group-text bg-white border-end-0">
						<i class="bi bi-search"></i>
					</span>

					<input
						type="text"
						name="q"
						value="{{ search_query }}"
						id="searchInput"
						class="form-control border-start-0"
						placeholder="Search by first or last name..."
					/>
					<button
						type="button"
						id="clearBtn"
						class="btn btn-outline-secondary"
						style="display: none"
					>
						<i class="bi bi-x-circle"></i>
					</button>
					<button type="submit" class="btn btn-primary">Search</button>
				</div>
			</form>

			<table class="table table-striped table-hover align-middle">
				<thead class="table-dark">
					<tr>
						<th scope="col">First Name</th>
						<th scope="col">Last Name</th>
						<th scope="col">Gender</th>
						<th scope="col">Age</th>
						<th scope="col">Stroke</th>
						<th scope="col">Action</th>
					</tr>
				</thead>
				<tbody>
					{% if patients %} {% for patient in patients %}
					<tr>
						<td>{{ patient.first_name }}</td>
						<td>{{ patient.last_name }}</td>
						<td>{{ patient.gender }}</td>
						<td>{{ patient.age }}</td>
						<td>
							{% if patient.stroke %}
							<span class="badge bg-danger">Yes</span>
							{% else %}
							<span class="badge bg-success">No</span>
							{% endif %}
						</td>
						<td>
							<a
								href="{{ url_for('clinician.view_patient', patient_id=patient.id) }}"
								class="btn btn-sm btn-outline-primary"
								>Manage</a
							>
						</td>
					</tr>
					{% endfor %} {% else %}
					<tr>
						<td colspan="6" class="text-center">No patients found</td>
					</tr>
					{% endif %}
				</tbody>
			</table>
		</div>
	</div>
</div>

{% endblock %}
