{% extends "base.html" %} {% block title %}Patient Details{% endblock %} {%
block content %}
<div class="container mt-4 mb-5" style="max-width: 900px">
	<div
		class="d-flex justify-content-between align-items-start mb-4 p-3 rounded border bg-light"
	>
		{% if role_name == "clinician" %}
		<div class="d-flex gap-2">
			<a
				href="{{ url_for('clinician.edit_patient_get', patient_id=patient.id) }}"
				class="btn btn-primary px-4"
			>
				<i class="bi bi-pencil-square me-1"></i> Edit
			</a>

			<form
				action="{{ url_for('clinician.delete_patient_post', patient_id=patient.id) }}"
				method="POST"
				onsubmit="return confirm('Are you sure you want to delete this patient? This action cannot be undone.')"
			>
				<input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
				<button type="submit" class="btn btn-danger px-4">
					<i class="bi bi-archive me-1"></i> Delete
				</button>
			</form>
		</div>
		{% endif %}
	</div>
	<h5 class="fw-semibold mb-3">Patient Record</h5>
	<table class="table table-striped table-sm">
		<tbody>
			{% for key, value in patient.items() %} {% if key not in ['_id', 'id',
			'created_at', 'updated_at'] %}
			<tr>
				<th class="text-capitalize">{{ key.replace('_',' ') }}</th>
				<td>
					{% if key == 'created_by' %} {{ patient_creator }} {% elif value is
					number %} {% if value == 0 %} No {% elif value == 1 %} Yes {% else %}
					{{ value }} {% endif %} {% elif value is string %} {{
					value.replace('_', ' ') | title }} {% else %} {{ value }} {% endif %}
				</td>
			</tr>
			{% endif %} {% endfor %}
		</tbody>
	</table>

	<div class="mt-4">
		<a
			href="{{ url_for('clinician.view_patients', patient_id=patient.id) }}"
			class="btn btn-outline-secondary"
		>
			<i class="bi bi-arrow-left me-1"></i> Back
		</a>
	</div>
</div>

{% endblock %}
