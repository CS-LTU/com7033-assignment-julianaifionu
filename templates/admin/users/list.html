{% extends "base.html" %} {% block title %}Users{% endblock %} {% block content
%}
<div class="container py-5">
	<div class="d-flex justify-content-between align-items-center py-3">
		<h1 class="mb-4">Users</h1>
		<a
			href="{{ url_for('admin.create_user_get') }}"
			class="btn btn-primary btn-sm"
		>
			<i class="bi bi-person-plus-fill me-1"></i> Add New User
		</a>
	</div>
	<div class="card shadow-sm">
		<div class="card-body">
			<form method="GET" class="d-flex align-items-center mt-4 mb-3 px-3">
				<div class="input-group">
					<span class="input-group-text bg-white border-end-0">
						<i class="bi bi-search"></i>
					</span>
					<input
						type="text"
						name="q"
						value="{{ search_query }}"
						id="searchInput"
						class="form-control border-start-0"
						placeholder="Search by full name or username..."
					/>
					<button
						type="button"
						id="clearBtn"
						class="btn btn-outline-secondary"
						style="display: none"
					>
						<i class="bi bi-x-circle"></i>
					</button>
					<button type="submit" class="btn btn-primary">Search</button>
				</div>
			</form>
			<table class="table table-striped table-hover align-middle">
				<thead class="table-dark">
					<tr>
						<th>User</th>
						<th>Role</th>
						<th>Activation Status</th>
						<th>Action</th>
					</tr>
				</thead>
				<tbody>
					{% if users %}{% for u in users %}
					<tr>
						<td>
							<a
								href="{{ url_for('admin.view_user', user_id=u['user_id']) }}"
								class="text-decoration-none text-dark d-flex align-items-center"
							>
								<div>
									<div class="fw-semibold">{{ u["full_name"] }}</div>
									<small class="text-muted">@{{ u["username"] }}</small>
								</div>
							</a>
						</td>
						<td class="text-muted small">
							{{ u["role_name"]|capitalize or "N/A" }}
						</td>
						<td>
							{% if u["is_active"] %}
							<span class="badge bg-success">
								<i class="bi bi-check-circle me-1"></i> Activated
							</span>
							{% else %}
							<span class="badge bg-secondary">
								<i class="bi bi-dash-circle me-1"></i> Inactive
							</span>
							{% endif %}
						</td>
						<td class="">
							<a
								href="{{ url_for('admin.view_user', user_id=u['user_id']) }}"
								class="btn btn-sm btn-outline-primary"
							>
								Manage
							</a>
						</td>
					</tr>
					{% endfor %} {% else %}
					<tr>
						<td colspan="6" class="text-center">No users found</td>
					</tr>
					{% endif %}
				</tbody>
			</table>
		</div>
	</div>
</div>
{% endblock %}
